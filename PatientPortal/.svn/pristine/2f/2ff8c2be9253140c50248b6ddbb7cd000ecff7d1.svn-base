using Microsoft.VisualStudio.TestTools.UnitTesting;
using PatientPortal.DataAccess.CMS;
using PatientPortal.DataAccess.Repo.CMS;
using PatientPortal.Domain.Models.CMS;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace PatientPortal.UnitTest.CMS
{
    [TestClass]
    public class WorkflowStateUnitTest
    {
        private IWorkflowState _workflowStateImpl;
        private IWorkflow _workflowImpl;

        [TestInitialize]
        public void TestInitialize()
        {
            //_workflowStateImpl = new WorkflowStateImpl();
            //_workflowImpl = new WorkflowImpl();
        }

        [TestMethod]
        public void WorkflowStateGetAll()
        {
            //var count = _workflowStateImpl.GetAll().Count;
            //Assert.IsTrue(count > 0);
        }

        [TestMethod]
        public void WorkflowStateInsert()
        {
            //var listworkflow = _workflowImpl.GetAll();
            //var wf = new Workflow();
            //if (listworkflow.Count==0)
            //{
            //    wf = new Workflow { Name = "Workflow" };
            //    listworkflow.Add(wf);
            //    _workflowImpl.Transaction(listworkflow, 'I');
            //};
            //wf = _workflowImpl.GetAll().LastOrDefault();

            //var workflowStateList = new List<WorkflowStateEdit>() {
            //    new WorkflowStateEdit
            //    {
            //        Id = 0,
            //        Name = "WFSt",
            //        IsActive = true,
            //        WorkflowId = wf.Id
            //    }
            //};
            //var flag = _workflowStateImpl.Transaction(workflowStateList, 'I');
            //Assert.IsTrue(flag);
        }

        //private Workflow InsertWorkflow()
        //{
        //    //var listworkflow = _workflowImpl.GetAll();
        //    //var wf = new Workflow();
        //    //if (listworkflow.Count == 0)
        //    //{
        //    //    wf = new Workflow { Name = "Workflow" };
        //    //    listworkflow.Add(wf);
        //    //    _workflowImpl.Transaction(listworkflow, 'I');
        //    //};
        //    //wf = _workflowImpl.GetAll().LastOrDefault();
        //    //return wf;
        //}

        [TestMethod]
        public void WorkflowStateUpdate()
        {
            //var list = _workflowStateImpl.GetAll();
            
            //var wf = InsertWorkflow();

            //if (list.Count == 0)//Insert
            //{

            //    var workflowStateList = new List<WorkflowStateEdit>() {
            //        new WorkflowStateEdit
            //        {
            //            Id = 0,
            //            Name = "WFSt",
            //            IsActive = true,
            //            WorkflowId = wf.Id
            //        }
            //    };
            //    _workflowStateImpl.Transaction(workflowStateList, 'I');
            //}
            //list = _workflowStateImpl.GetAll();

            //var item = list.LastOrDefault();
            //var listUpdate = new List<WorkflowStateEdit>()
            //{
            //    new WorkflowStateEdit
            //    {
            //        Id = item.Id,
            //        WorkflowId = item.WorkflowId,
            //        IsActive = true
            //    }
            //};
            //var flag = _workflowStateImpl.Transaction(listUpdate, 'U');
            //Assert.IsTrue(flag);
        }

        [TestMethod]
        public void WorkflowStateDelete()
        {
            //var list = _workflowStateImpl.GetAll();

            //var wf = InsertWorkflow();

            //if (list.Count == 0)//Insert
            //{

            //    var workflowStateList = new List<WorkflowStateEdit>() {
            //        new WorkflowStateEdit
            //        {
            //            Id = 0,
            //            Name = "WFSt",
            //            IsActive = true,
            //            WorkflowId = wf.Id
            //        }
            //    };
            //    _workflowStateImpl.Transaction(workflowStateList, 'I');
            //}
            //list = _workflowStateImpl.GetAll();

            //var item = list.LastOrDefault();
            //var listUpdate = new List<WorkflowStateEdit>()
            //{
            //    new WorkflowStateEdit
            //    {
            //        Id = item.Id,
            //        WorkflowId = item.WorkflowId,
            //        IsActive = true
            //    }
            //};
            //var flag = _workflowStateImpl.Transaction(listUpdate, 'D');
            //Assert.IsTrue(flag);
        }
    }
}
